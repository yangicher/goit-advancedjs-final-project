import{a as v}from"./assets/vendor-DDD7fsZd.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const y="https://your-energy.b.goit.study/api/",p=async(o,e)=>{try{return(await v.get(`${y}${o}`,{params:e})).data}catch(t){throw console.error("Error in get:",t),t}},l={FILTERS_PER_PAGE:12,EXERCISES_PER_PAGE:10,SEARCH_DEBOUNCE_DELAY:1e3,ANIMATION_DURATION:1450,DEFAULT_FILTER:"Muscles"},h={musclesGrid:"#muscles-grid",tabs:".tab",searchSection:"#search-section",breadcrumb:"#breadcrumb",searchInput:".search-input",searchClearBtn:"#search-clear-btn"},d={MUSCLES:"Muscles",BODY_PARTS:"Body parts",EQUIPMENT:"Equipment"};class S{constructor(){this.currentPage=1,this.totalPages=1,this.currentFilter=l.DEFAULT_FILTER,this.selectedBodyPart="",this.allExercises=[],this.filteredExercises=[],this.currentHeight=0,this.searchTimeout=null}reset(){this.currentPage=1,this.totalPages=1,this.allExercises=[],this.filteredExercises=[],this.selectedBodyPart="",this.clearSearchTimeout()}clearSearchTimeout(){this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null)}}class n{static getElementById(e){return document.getElementById(e.replace("#",""))}static querySelectorAll(e){return document.querySelectorAll(e)}static show(e){e.style.display="block"}static hide(e){e.style.display="none"}static setContent(e,t){e.innerHTML=t}static measureContentHeight(e,t){const s=document.createElement("div");Object.assign(s.style,{visibility:"hidden",position:"absolute",top:"-9999px",width:`${t}px`}),s.innerHTML=e,document.body.appendChild(s);const a=s.scrollHeight;return document.body.removeChild(s),a}static animateHeight(e,t,s=l.ANIMATION_DURATION){e.style.height=`${t}px`,setTimeout(()=>{e.style.height="auto"},s)}}class m{static async fetchFilters(e,t=1){return await p("filters",{filter:e,page:t,limit:l.FILTERS_PER_PAGE})}static async fetchExercises(e,t,s=1){const a={page:s,limit:l.EXERCISES_PER_PAGE};switch(t){case d.BODY_PARTS:a.bodypart=e;break;case d.MUSCLES:a.muscles=e;break;case d.EQUIPMENT:a.equipment=e;break}return await p("exercises",a)}}class c{static filterCard(e){return`
      <div class="muscle-card" data-filter="${e.name}" data-filter-type="${e.filter}">
        <img src="${e.imgURL}" alt="${e.name}" class="muscle-card-img" />
        <div class="muscle-card-label">
          <span class="muscle-card-title">${e.name}</span>
          <span class="muscle-card-subtitle">${e.filter}</span>
        </div>
      </div>
    `}static exerciseCard(e){return`
      <div class="exercise-item">
        <div class="exercise-top-row">
          <div class="workout-rating-left">
            <div class="workout-badge">WORKOUT</div>
            <div class="rating">
              ${e.rating||4.5} <span class="star">★</span>
            </div>
          </div>
          <button class="start-btn">Start <span class="arrow">→</span></button>
        </div>
        <div class="exercise-middle-row">
          <div class="exercise-icon">⚡</div>
          <h3 class="exercise-title">${e.name}</h3>
        </div>
        <div class="exercise-bottom-row">
          <span><span class="meta-label">Burned calories:</span> <span class="meta-value">${e.burnedCalories||150} / 3 min</span></span>
          <span><span class="meta-label">Body part:</span> <span class="meta-value">${e.bodyPart}</span></span>
          <span><span class="meta-label">Target:</span> <span class="meta-value">${e.target}</span></span>
        </div>
      </div>
    `}static pagination(e,t){if(t<=1)return"";const s=[];return s.push(`
      <button class="page-btn nav-btn prev" ${e===1?"disabled":""} data-page="prev"></button>
    `),s.push(c.generatePageNumbers(e,t)),s.push(`
      <button class="page-btn nav-btn next" ${e===t?"disabled":""} data-page="next"></button>
    `),`<div class="muscles-pagination">${s.join("")}</div>`}static generatePageNumbers(e,t){const s=[];if(t<=5)for(let a=1;a<=t;a++)s.push(`<button class="page-btn ${a===e?"active":""}" data-page="${a}">${a}</button>`);else{s.push(`<button class="page-btn ${e===1?"active":""}" data-page="1">1</button>`),e>3&&s.push('<span class="page-dots">...</span>');const a=Math.max(2,e-1),i=Math.min(t-1,e+1);for(let r=a;r<=i;r++)r!==1&&r!==t&&s.push(`<button class="page-btn ${r===e?"active":""}" data-page="${r}">${r}</button>`);e<t-2&&s.push('<span class="page-dots">...</span>'),t>1&&s.push(`<button class="page-btn ${t===e?"active":""}" data-page="${t}">${t}</button>`)}return s.join("")}static loadingTemplate(e){return`<div class="loading" style="height: ${e-80}px;">Loading...</div>`}static errorTemplate(e){return`<div class="error">${e}</div>`}static contentWrapper(e,t=""){return`
      <div class="content-wrapper">
        <div class="content-area">${e}</div>
        ${t?`<div class="pagination-area">${t}</div>`:""}
      </div>
    `}}class L{constructor(){if(this.state=new S,this.elements=this.initializeElements(),!this.elements){console.error("Failed to initialize ExercisesManager: required DOM elements not found");return}this.setupEventListeners()}initializeElements(){const e={musclesGrid:n.getElementById(h.musclesGrid),tabs:n.querySelectorAll(h.tabs),searchSection:n.getElementById(h.searchSection),breadcrumb:n.getElementById(h.breadcrumb),searchClearBtn:n.getElementById(h.searchClearBtn)};return!e.musclesGrid||!e.searchSection?(console.error("Essential DOM elements not found for exercises functionality"),null):(e.searchInput=e.searchSection.querySelector(h.searchInput),e)}setupEventListeners(){this.setupTabListeners(),this.setupSearchListeners()}setupTabListeners(){this.elements.tabs.forEach(e=>{e.addEventListener("click",()=>this.handleTabSwitch(e))})}setupSearchListeners(){this.elements.searchInput.addEventListener("input",e=>this.handleSearchInput(e)),this.elements.searchInput.addEventListener("keydown",e=>this.handleSearchKeydown(e)),this.elements.searchClearBtn.addEventListener("click",e=>this.handleSearchClear(e))}async renderFilters(e=l.DEFAULT_FILTER,t=1){this.hideSearchAndBreadcrumb(),this.state.selectedBodyPart="",this.prepareContainer();try{const s=await m.fetchFilters(e,t);if(this.updateFilterState(s,e),!s.results.length){this.showError("No items found.");return}const a=this.buildFiltersContent(s.results),i=c.pagination(t,this.state.totalPages),r=c.contentWrapper(a,i);this.updateContainerWithAnimation(r),this.attachFilterEventListeners()}catch{this.showError("Failed to load data.")}}async renderExercisesList(e,t,s="",a=1){this.showSearchAndBreadcrumb(e),s||this.clearSearchInput(),this.prepareContainer();try{const i=await m.fetchExercises(e,t,a);this.updateExercisesState(i,e);const r=this.filterExercises(s);if(r.length===0){this.showNoExercisesFound(s);return}const g=this.buildExercisesContent(r,e),f=s?"":c.pagination(a,this.state.totalPages),b=c.contentWrapper(g,f);this.updateContainerWithAnimation(b),this.attachExercisesEventListeners(s)}catch{this.showError("Failed to load exercises.")}}buildFiltersContent(e){return`<div class="muscles-cards-wrapper">${e.map(s=>c.filterCard(s)).join("")}</div>`}buildExercisesContent(e,t){const s=e.map(i=>c.exerciseCard(i)).join(""),a=`<button class="back-btn"><span class="arrow">←</span> Back to ${this.state.currentFilter}</button>`;return`<div class="exercises-list">${s}</div>${a}`}updateFilterState(e,t){this.state.totalPages=e.totalPages,this.state.currentFilter=t}updateExercisesState(e,t){this.state.allExercises=e.results||[],this.state.totalPages=e.totalPages||1,this.state.selectedBodyPart=t}filterExercises(e){return e?this.state.filteredExercises=this.state.allExercises.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):this.state.filteredExercises=[...this.state.allExercises],this.state.filteredExercises}hideSearchAndBreadcrumb(){n.hide(this.elements.searchSection),n.hide(this.elements.breadcrumb)}showSearchAndBreadcrumb(e){n.show(this.elements.searchSection),n.show(this.elements.breadcrumb),this.elements.breadcrumb.textContent=`/ ${e.charAt(0).toUpperCase()+e.slice(1)}`}prepareContainer(){this.state.currentHeight===0&&(this.state.currentHeight=this.elements.musclesGrid.getBoundingClientRect().height||600),this.elements.musclesGrid.style.height=`${this.state.currentHeight}px`,n.setContent(this.elements.musclesGrid,c.loadingTemplate(this.state.currentHeight))}updateContainerWithAnimation(e){const t=n.measureContentHeight(e,this.elements.musclesGrid.offsetWidth);n.setContent(this.elements.musclesGrid,e),n.animateHeight(this.elements.musclesGrid,t),this.state.currentHeight=t}showError(e){n.setContent(this.elements.musclesGrid,c.errorTemplate(e))}showNoExercisesFound(e){const t=`No exercises found${e?` matching "${e}"`:""}.`,s=`<button class="back-btn"><span class="arrow">←</span> Back to ${this.state.currentFilter}</button>`;n.setContent(this.elements.musclesGrid,c.errorTemplate(t)+s),this.attachBackButtonListener()}handleTabSwitch(e){this.elements.tabs.forEach(a=>a.classList.remove("active")),e.classList.add("active"),this.state.reset(),this.clearSearchInput();const s={muscles:d.MUSCLES,"body-parts":d.BODY_PARTS,equipment:d.EQUIPMENT}[e.dataset.tab]||l.DEFAULT_FILTER;this.renderFilters(s,1)}handleSearchInput(e){const t=e.target.value.trim();this.updateSearchClearButton(),this.state.clearSearchTimeout(),this.state.searchTimeout=setTimeout(()=>{this.performSearch(t)},l.SEARCH_DEBOUNCE_DELAY)}handleSearchKeydown(e){e.key==="Enter"&&(e.preventDefault(),this.state.clearSearchTimeout(),this.performSearch(e.target.value.trim()))}handleSearchClear(e){e.preventDefault(),this.clearSearch()}performSearch(e){this.state.selectedBodyPart&&this.renderExercisesList(this.state.selectedBodyPart,this.state.currentFilter,e,1)}clearSearch(){this.elements.searchInput.value="",this.updateSearchClearButton(),this.state.clearSearchTimeout(),this.state.selectedBodyPart&&this.performSearch("")}clearSearchInput(){this.elements.searchInput.value="",this.updateSearchClearButton()}updateSearchClearButton(){const e=this.elements.searchInput.value.trim().length>0;this.elements.searchClearBtn.style.display=e?"flex":"none"}attachFilterEventListeners(){this.attachFilterCardListeners(),this.attachPaginationListeners("filters")}attachExercisesEventListeners(e){this.attachBackButtonListener(),e||this.attachPaginationListeners("exercises")}attachFilterCardListeners(){this.elements.musclesGrid.querySelectorAll(".muscle-card").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.filter,s=e.dataset.filterType;this.renderExercisesList(t,s,"",1)})})}attachBackButtonListener(){const e=this.elements.musclesGrid.querySelector(".back-btn");e&&e.addEventListener("click",()=>{this.state.reset(),this.clearSearchInput(),this.renderFilters(this.state.currentFilter,1)})}attachPaginationListeners(e){this.elements.musclesGrid.querySelectorAll(".page-btn").forEach(t=>{t.addEventListener("click",()=>this.handlePagination(t,e))})}handlePagination(e,t){const{page:s}=e.dataset;let a=this.state.currentPage;s==="prev"&&this.state.currentPage>1?a=this.state.currentPage-1:s==="next"&&this.state.currentPage<this.state.totalPages?a=this.state.currentPage+1:s&&!isNaN(s)&&(a=parseInt(s)),a!==this.state.currentPage&&(this.state.currentPage=a,t==="filters"?this.renderFilters(this.state.currentFilter,a):this.renderExercisesList(this.state.selectedBodyPart,this.state.currentFilter,"",a))}init(){this.elements&&this.renderFilters(l.DEFAULT_FILTER,1)}}function E(){new L().init()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();let u=document.getElementById("scrollTopButton");u&&(u.onclick=function(){C()});window.onscroll=function(){T()};function T(){document.body.scrollTop>20||document.documentElement.scrollTop>20?u.style.display="block":u.style.display="none"}function C(){document.body.scrollTop=0,document.documentElement.scrollTop=0}
//# sourceMappingURL=index.js.map
